<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/ex37_style.css">
    <title>아코디언 구현</title>
</head>
<body>
    <div class="container">
        <button id="btn-collapse">Collapse All</button>
        <h2>FAQ</h2>
        <section id="faq">
          <div class="panel-question active">
            <div class="panel-heading">
              + Lorem ipsum dolor sit?
            </div>
            <div class="panel-body" id="thisone">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad aliquid voluptate fugit quaerat non molestiae quo magni soluta minima corporis! Soluta, ipsa et.</p>
              <p>Quos quibusdam, nesciunt totam ullam quasi neque!</p>
            </div>
          </div>
          
          <div class="panel-question">
            <div class="panel-heading">
              + Lorem ipsum dolor sit?
            </div>
            <div class="panel-body">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad aliquid voluptate fugit quaerat non molestiae quo magni soluta minima corporis! Soluta, ipsa et.</p>
              <p>Quos quibusdam, nesciunt totam ullam quasi neque!</p>
            </div>
          </div>
          
          <div class="panel-question">
            <div class="panel-heading">
              + Lorem ipsum dolor sit?
            </div>
            <div class="panel-body">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad aliquid voluptate fugit quaerat non molestiae quo magni soluta minima corporis! Soluta, ipsa et.</p>
              <p>Quos quibusdam, nesciunt totam ullam quasi neque!</p>
            </div>
          </div>
        </section>
      </div>
      <script>
        var btnCollapse = document.getElementById('btn-collapse'),
            heading = document.getElementsByClassName('panel-heading'),
            question = document.getElementsByClassName('panel-question'),
            answer = document.getElementsByClassName('panel-body');

            //제목을 클릭하면 할 일
            for (var i = 0; i < heading.length; i++) {
                //헤딩들마다 할 일
                heading[i].addEventListener('click', function(ev){
                    //question들 마다 할 일
                    for(var j = 0; j < question.length; j++){
                        question[j].classList.remove('active');
                        ev.target.parentNode.classList.add('active');
                        activateBody();
                    }
                })

            }

            function activateBody(){
                //pane-body 모두 안보이도록
                for (var x=0; x < answer.length; x++) {
                    answer[x].style.display = 'none';
                }
                
                //클래스명 active panel-queston 자식 중 panel-body 나타나도록
                var activePanel = document.querySelector('.panel-question.active .panel-body');
                activePanel.style.display="block";
            }

            // 열자마자 실행해야함
            activateBody(); 

            //collapse all 버튼을 클릭하면 모든 answer 안보이도록
            btnCollapse.addEventListener('click', function(){
                for(var i = 0; i < answer.length; i++){
                    answer[i].style.display = 'none';
                }
            })
      </script>
</body>
</html>